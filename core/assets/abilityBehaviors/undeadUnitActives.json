{
	"abilityList": [{
		"ids": [{"id":"Acan", "castId": "cannibalize"}],
		"type": "NORMAL_AUTOTARGET",
		"extraCastConditions": [{
			"type": "setCantUseReasonOnFailure",
			"condition": {
				"type": "matchingCorpseExistsInRangeOfUnit",
				"originUnit": {
					"type": "getCastingUnit"
				},
				"range": {
					"type": "getAbilityDataAsFloat",
					"dataField": "B"
				},
				"conditions": [{
					"type": "isUnitValidTarget",
					"target": {
						"type": "getMatchingUnit"
					}
				},{
					"type": "not",
					"condition": {
						"type": "doesUnitHaveBuff",
						"unit": {
							"type": "getMatchingUnit"
						},
						"id": {
							"type": "getAlias"
						}
					}
				}]
			},
			"reason": "THERE_ARE_NO_USABLE_CORPSES_NEARBY"
		}],
		"extraTargetConditions": [{
			"type": "setCantUseReasonOnFailure",
			"condition": {
				"type": "and",
				"condition1": {
					"type": "isUnitValidTarget",
					"target": {
						"type": "getAbilityTargetedUnit"
					}
				},
				"condition2": {
					"type": "not",
					"condition": {
						"type": "doesUnitHaveBuff",
						"unit": {
							"type": "getAbilityTargetedUnit"
						},
						"id": {
							"type": "getAlias"
						}
					}
				}
			},
			"reason": "THERE_ARE_NO_USABLE_CORPSES_NEARBY"
		}],
		"specialFields": {
			"autoAquireTarget": [{
				"type": "setAutoTargetUnit",
				"unit": {
					"type": "getNearestCorpseInRangeOfUnit",
					"originUnit": {
						"type": "getCastingUnit"
					},
					"range": {
						"type": "getAbilityDataAsFloat",
						"dataField": "B"
					},
					"conditions": [{
						"type": "isUnitValidTarget",
						"target": {
							"type": "getMatchingUnit"
						}
					},{
						"type": "not",
						"condition": {
							"type": "doesUnitHaveBuff",
							"unit": {
								"type": "getMatchingUnit"
							},
							"id": {
								"type": "getAlias"
							}
						}
					}]
				}
			}]
		},
		"onAddAbility": [{
				"type": "createNonStackingStatBuff",
				"buffType": {
					"type": "getNonStackingStatBuffTypeFromString",
					"id": {
						"type": "rawString",
						"value": "HPGEN"
					}
				},
				"stackingKey": {
					"type": "getAllowStackingKey"
				},
				"value": {
					"type": "getAbilityDataAsFloat",
					"dataField": "A"
				}
			}],
		"onLevelChange": [{
			"type": "updateNonStackingStatBuff",
			"buff": {
				"type": "getLastCreatedNonStackingStatBuff"
			},
			"value": {
				"type": "getAbilityDataAsFloat",
				"dataField": "A"
			}
		}],
		"onEndCasting": [{
				"type": "beginChanneling"
			},{
				"type": "addNonStackingStatBuff",
				"targetUnit": {
					"type": "getCastingUnit"
				},
				"buff": {
					"type": "getLastCreatedNonStackingStatBuff"
				}
			},{
				"type": "createTargetingBuff",
				"buffId": {
					"type": "getAlias"
				}
			},{
				"type": "addBuff",
				"target": {
					"type": "getAbilityTargetedUnit"
				},
				"buff": {
					"type": "getLastCreatedBuff"
				}
		}],
		"onChannelTick": [{
				"type": "if",
				"condition": {
					"type": "isUnitMaxHp",
					"unit": {
						"type": "getCastingUnit"
					}
				},
				"thenActions": [{
					"type": "finishChanneling"
				}],
				"elseActions": []
			},{
				"type": "periodicExecute",
				"periodicActions": [{
						"type": "finishChanneling"
					}],
				"delaySeconds": {
					"type": "getAbilityDuration",
					"target": {
						"type": "getAbilityTargetedUnit"
					}
				}
		}],
		"onEndChannel": [{
				"type": "removeNonStackingStatBuff",
				"targetUnit": {
					"type": "getCastingUnit"
				},
				"buff": {
					"type": "getLastCreatedNonStackingStatBuff"
				}
			},{
				"type": "removeUnit",
				"unit": {
					"type": "getAbilityTargetedUnit"
				}
			},{
				"type": "cleanUpCastInstance"
		}]
	},{
		"ids": [{"id":"Asac", "castId": "sacrifice"}],
		"type": "NORMAL_PAIRING",
		"overrideFields": {
			"rangeOverride": {
				"type": "fMaxValue"
			}
		},
		"specialFields": {
			"pairAbilityId": {
				"type": "getWar3IDFromString",
				"id": "Alam"
			},
			"pairUnitTypeError": "MUST_TARGET_AN_ACOLYTE",
			"cantTargetError": "MUST_TARGET_AN_ACOLYTE",
			"cantPairError": "SACRIFICIAL_PIT_IS_ALREADY_SACRIFICING_AN_ACOLYTE",
			"autoTargetPartner": {
				"type": "rawBoolean",
				"value": "false"
			},
			"orderPairedUnit": {
				"type": "rawBoolean",
				"value": "true"
			},
			"orderPairedUnitOrderId": {
				"type": "idString",
				"idString": {
					"type": "rawString",
					"value": "requestsacrifice"
				}
			}
		},
		"displayFields": {
			"goldCost": {
				"type": "getUnitTypeGoldCost",
				"id": {
					"type": "getWar3IDFromString",
					"id": "ushd"
				}
			},
			"lumberCost": {
				"type": "getUnitTypeLumberCost",
				"id": {
					"type": "getWar3IDFromString",
					"id": "ushd"
				}
			},
			"foodCost": {
				"type": "getUnitTypeFoodCost",
				"id": {
					"type": "getWar3IDFromString",
					"id": "ushd"
				}
			}
		},
		"onAddAbility": [{
			"type": "addRallyAbility",
			"unit": {
				"type": "getCastingUnit"
			}
		}]
	},{
		"ids": [{"id":"Alam", "castId": "requestsacrifice"}],
		"type": "NORMAL_PAIRING",
		"extraTargetConditions": [{
			"type": "setCantUseReasonOnFailure",
			"condition": {
				"type": "not",
				"condition": {
					"type": "isUnitTraining",
					"unit": {
						"type": "getAbilityTargetedUnit"
					}
				}
			},
			"reason": "SACRIFICIAL_PIT_IS_ALREADY_SACRIFICING_AN_ACOLYTE"
		}],
		"specialFields": {
			"pairAbilityId": {
				"type": "getWar3IDFromString",
				"id": "Asac"
			},
			"pairUnitTypeError": "MUST_TARGET_A_SACRIFICIAL_PIT",
			"cantTargetError": "MUST_TARGET_A_SACRIFICIAL_PIT",
			"autoTargetPartner": {
				"type": "rawBoolean",
				"value": "false"
			}
		},
		"onEndCasting": [{
			"type": "startSacrificingUnit",
			"unit": {
				"type": "getAbilityTargetedUnit"
			},
			"sacrifice": {
				"type": "getCastingUnit"
			},
			"id": {
				"type": "getWar3IDFromString",
				"id": "ushd"
			}
		}]
	}]
}